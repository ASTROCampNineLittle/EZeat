<h1>分店名稱：<%= @store.name %></h1>

<%= link_to "新增方案", new_backend_store_dish_path(@store), class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-2 border border-blue-500 rounded"%>

<%= link_to "回分店列表", backend_company_stores_path(@store.company), class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-2 border border-blue-500 rounded"%>
<h2>方案清單</h2>
<table class="min-w-full border-collapse block md:table">
		<thead class="block md:table-header-group">
			<tr class="border border-gray-500 md:border-none block md:table-row absolute -top-full md:top-auto -left-full md:left-auto  md:relative ">
				<th class="bg-gray-600 p-2 text-white font-bold md:border md:border-gray-500 text-left block md:table-cell">可訂位日期</th>
        <th class="bg-gray-600 p-2 text-white font-bold md:border md:border-gray-500 text-left block md:table-cell">方案名稱</th>
				<th class="bg-gray-600 p-2 text-white font-bold md:border md:border-gray-500 text-left block md:table-cell">方案價格</th>
				<th class="bg-gray-600 p-2 text-white font-bold md:border md:border-gray-500 text-left block md:table-cell">方案目前狀態</th>
        <th class="bg-gray-600 p-2 text-white font-bold md:border md:border-gray-500 text-left block md:table-cell">編輯方案資訊</th>
       <th class="bg-gray-600 p-2 text-white font-bold md:border md:border-gray-500 text-left block md:table-cell">刪除方案</th>
			</tr>
		</thead>
    
		<tbody class="block md:table-row-group">
      <% @dishes.each do |dish| %>
        <tr class="bg-white-300 border border-gray-500 md:border-none block md:table-row">
          <td class="p-2 md:border md:border-gray-500 text-left block md:table-cell"><span class="inline-block w-1/3 md:hidden font-bold">可訂位日期</span>
            <% dish.open_dates.sort_by{ |open_date| open_date.availible_date }.each do |open_date|%>
              <% if open_date.availible_date >= DateTime.current.to_date %>
                <%= link_to "#{open_date.availible_date}", backend_open_date_offers_path(open_date), class:"bg-green-500 hover:bg-green-700 text-white font-bold py-1 px-2 border border-green-500 rounded" %>
              <% else %>
              <% end %>
            <%end%>
            
            <%= link_to "新增日期", backend_dish_open_dates_path(dish), class:"bg-gray-400 hover:bg-gray-500 text-white font-bold py-1 px-2 border border-gray-400 rounded"  %>
          </td>
          <td class="p-2 md:border md:border-gray-500 text-left block md:table-cell"><span class="inline-block w-1/3 md:hidden font-bold">方案名稱</span><%= dish.name %></td>
          <td class="p-2 md:border md:border-gray-500 text-left block md:table-cell"><span class="inline-block w-1/3 md:hidden font-bold">方案價格</span><%= dish.price %></td>
          <td class="p-2 md:border md:border-gray-500 text-left block md:table-cell"><span class="inline-block w-1/3 md:hidden font-bold">開放狀態</span>
            <%= if dish.status == false
              dish.status = "未開放"
            else
              dish.status = "開放中"
            end%>
          </td>
          <td class="p-2 md:border md:border-gray-500 text-left block md:table-cell">
            <%= link_to "修改資料", edit_backend_dish_path(dish), class:"bg-gray-400 hover:bg-gray-500 text-white font-bold py-1 px-2 border border-gray-400 rounded"%>
          </td>
          <td class="p-2 md:border md:border-gray-500 text-left block md:table-cell">
            <%= link_to "刪除方案", backend_dish_path(dish), method: :delete, data: { confirm: "Are you sure?" }, class:"bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-2 border border-red-500 rounded" %>
          </td>
        </tr>
      <% end %>
	</tbody>
</table>

